<style type="text/css">
p {
	text-indent: 10px;
}

hr {
	height: 1px;
	border: none;
	border-top: 1px dashed green;
}

blockquote {
	border: 1px solid #dedbde;
	border-radius: 3px;
	padding: 10px;
	background-color: rgba(255, 255, 255, 0.1);
}

pre {
	border: 1px solid #dedbde;
	border-radius: 3px;
	padding: 10px;
	background-color: rgba(255, 255, 255, 0.1);
}

.strong {
	font-style: inherit;
	font-weight: bold;
	color: red;
	text-decoration: underline;
}
</style>

<p>关于12306的一些个人看法，整理如下。</p>
<br>

<p class="strong">
	<span style="color: #3366ff;"><strong>◆ 关于排队系统</strong></span>
</p>
<p>个人觉得排队系统还是比较合理的，可以分离主干系统的压力。</p>
<p>当然不应该是现在这个样子的。我的想象中，下列功能应该需要在排队系统中提供。</p>
<ol>
	<li>登录。</li>
	<li>设置查询条件，个人信息及付款选项等。</li>
	<li>简单查询结果。这个结果不会是即时，而且是简单的。比如根据用户设置的查询条件，锁定几条换乘线路，该线路是否有剩余等等。类似售票处墙上定时刷新的大屏幕。</li>
	<li>等待队列即时信息。比如目前有多少人在排队，预计需要等待时间。</li>
	<li>自动跳转订票主干系统。</li>
</ol>
<p>其中2，3既可以减轻主干系统的压力，又可以让用户在等待时有事可做。</p>
<p>
	4也很重要。大家应该也有类似的经验，在时间不可预知的情况下，等待会变得异常漫长。当知道大概的等待时长，并且还看到有那许多人一起在等待，多少会减少大多数人心理上的焦虑。当然我也知道，这只是个改善用户体验，治标不治本的措施。</p>
<br>

<p class="strong">
	<strong><span style="color: #3366ff;">◆ 关于系统设计</span></strong>
</p>
<p>排队，简易查询，订票这3个系统需要分离。从需求到结构都有很大不同，放一起只会互相干扰。</p>
<ol>
	<li>排队系统。上面提到的那样，基本不需要多大的服务器资源。完全作为业务处理意义上的缓存。</li>
	<li>简易查询系统。上面也有提到，无须精确只要明确！由系统后台定间隔，非同期，自动更新。因为没有事务，NoSQL最合适。</li>
	<li>订票主干系统。大家都熟悉的那些以外，个人觉得这个系统可以加上限时——比如十分钟！和窗口买票一样，十分钟内选好票，没搞定的回去重新排队！（会有争议吧？）</li>
</ol>
<p>
	1和2重点在大并发请求，3的重点在精确。当然排队时间，简易查询更新间隔及订票限时应该根据系统压力可以调整，而且需要不断的努力以缩短等待和延长限时。（纯官腔？！哈！）<br>
	这个设计有个前提，就是造价是百万单位。上亿？！那还排个毛队，限个毛时！
</p>
<p>最后，竟然是Oracle和Weblogic？！大家可以查查Oracle的授权！咱们大天朝，真有钱！</p>
<br>

<p class="strong">
	<strong><span style="color: #3366ff;">◆ 关于抢票软件</span></strong>
</p>
<p>抢票软件的目的是正义和善良的，抢票软件的存在是错误和无奈的，这种扭曲恐怕也可以说是我们天朝的特色吧！</p>
<p>作者有句话，“其实还幻想过，倘若有一天他们发现助手的功能不错，他们也许会直接集成到网站里，然后我就可以不用再去弄了。 ”看着想哭！</p>
<br>

<p class="strong">
	<strong><span style="color: #3366ff;">◆ 其他想说的话</span></strong>
</p>
<p>
	当年的奥运订票系统都还记得吧？！也是上来就瘫，瘫了又瘫！但好歹那次是一过性的，还是面向全球的（是吧？！）？！而且靠开幕式闭幕式什么的还能挣点脸回来。这火车订票就不一样了，对几亿人来讲，每年都得折腾上几次的啊！2亿多的老百姓年年受几次这种罪，你们就真的能心安吗？！</p>
<p>
	不靠谱的说，国家就应该或拆分铁道部或扶持个“地道部”出来。有竞争才有动力，垄断必然腐坏。<br>
	虽说国情在那里，但是比如移动，联通，电信等等间的竞争还是有那么点点好处的，对吧？比如如果不是两桶油，只有“中石油化”，简直无法想象会如何的不堪！
</p>